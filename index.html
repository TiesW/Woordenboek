<html>
    <head>
            <link rel="stylesheet" href="mijnstyles.css" type="text/css">
            <script src="scripts/tweedepagina.js"></script>


<head>
        <link rel="stylesheet" href="mijnstyles.css" type="text/css">
        <style>
        </style>
                
</head>
        <script>
            class Woord
            {
                woord;
                definitie;

                constructor(woord,definitie)
                {
                    this.woord = woord;
                    this.definitie = definitie;
                }
            }
            var woordObjecten = [];
            var woorden = ["wat", "church", "street", "high", "hml", "fml"];
            var woordenOutput = [];
            var definities = [];

            var counter = 0;

            //xmlhttprequest
            function myXMLHttpRequest(woorden) {

                var data = null;

                var xhr = new XMLHttpRequest();
                xhr.withCredentials = true;

                xhr.addEventListener("readystatechange", function () {
                    if (this.readyState === 4) {
                        // console.log(this.responseText);
                        APIresponseToDefinities(this.responseText);
                        counter += 1;
                        
                        if (woorden.length == definities.length) {
                            maakWoordObj()
                            lijstMaken()
                        } else {
                            myXMLHttpRequest(woorden)
                        }
                        

                    
                    }
                });

                xhr.open("GET", "https://mashape-community-urban-dictionary.p.rapidapi.com/define?term="+woorden[counter]);
                xhr.setRequestHeader("x-rapidapi-host", "mashape-community-urban-dictionary.p.rapidapi.com");
                xhr.setRequestHeader("x-rapidapi-key", "75042f20e3mshb4d82e7e5f04ca4p1fdc16jsn735557660585");

                xhr.send(data);

            }

            function APIresponseToDefinities(response) {
                definities.push(JSON.parse(response).list[0].definition);

            }


            function paginaLaden() {
                getDefinitions()
                // maakWoordObj()
                spelerLaden()
                // lijstMaken()
            }

            function getDefinitions() {

                myXMLHttpRequest(woorden)
            }


            function maakWoordObj()
            {
                for(var a = 0; a < woorden.length; a++)
                {
                    woord1 = new Woord(woorden[a],definities[a]);
                    woordObjecten.splice(0,0,woord1);
                }
                console.log(woordObjecten);
                updateText()
                
            }




            function woordToevoegen()
            {
                var woord = document.getElementById("woordenInput").value;
                var definitie = document.getElementById("defenitieInput").value;

                woorden.splice(0, 0, woord);
                definities.splice(0, 0, definitie)

                woord1 = new Woord(woorden[0],definities[0]);
                woordObjecten.splice(0,0,woord1)
                updateText();
                
            }

            function updateText() {
                lijstMaken();
                console.log(woordObjecten);
                document.getElementById("column1").innerHTML = "";
                document.getElementById("column2").innerHTML = "";

                for(var i = 0; i < woordObjecten.length; i++)
                {
                    document.getElementById("column1").innerHTML +=  woordObjecten[i].woord + ": &nbsp <br>";
                    document.getElementById("column2").innerHTML +=  woordObjecten[i].definitie + "<br>";


                }
            }

            
            function lijstMaken(){

                var tableHeaderRowCount = 1;
                var table = document.getElementById("tabelwoorden");
                var rowCount = table.rows.length;
                for (var i = 1; i < rowCount; i++) {
                    table.deleteRow(tableHeaderRowCount);
                }

                var rows = woordObjecten;
                var html = document.getElementById("tabelwoorden").innerHTML;
                for (var i = 0; i < rows.length; i++) {
                    html+="<tr>";
                    html+="<td>"+rows[i].woord+"</td>";
                    html+="<td>"+rows[i].definitie+"</td>";
                    html+="</tr>";
                }
                document.getElementById("tabelwoorden").innerHTML = html;
                }

        
        </script>
        <style>
/*             
            .column
            {
                flex: 50%;
            }
            .row
            {
                display: flex;
            }

            #column1
            {
                text-align: right;
            } */
        </style>
    </head>
    <body onload="paginaLaden()">
        <div class="myBody">
        <p id="hiernaam">        HIer komt uiteindelijk de tekst: "Welkom, "           </p>
        <span>voer hier je woord in</span>
        <input type="text" id="woordenInput">
        <br>
        <span>voer hier je definitie in</span>
        <input type="text" id="defenitieInput">
        <br>
        <input type="button" id="submitButton" onclick="woordToevoegen()" value="Submit">
        </div>
        <br>
        <br>
        <div class="row">
            <div class="column" id="column1"></div>
            <div class="column" id="column2"></div>
        </div>

        <div class="container">
                <div class="lijst">
                    <h1>Woorden</h1>
                    <table id="tabelwoorden">
                        <tr>
                            <th>Woord</th>
                            <th>Definitie</th>

                        </tr>
                    </table>
                </div>

            </div>
    </body>
</html>

